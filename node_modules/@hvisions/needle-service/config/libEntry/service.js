const modules = {};

try {
  const services = require.context('../api', false, /\.js$/);
  // console.log('------------');
  // console.log(services.keys());
  // console.log('------------');

  const handler = {
    get: function(obj, prop) {
      if (prop in obj) {
        return obj[prop];
      }
      if (prop in obj.__proto__) {
        return obj.__proto__[prop];
      }
      return undefined;
    }
  };
  services.keys().forEach(key => {
    modules[key.replace(/(\.\/|\.js)/g, '')] = new Proxy(services(key).default, handler);
  });

  // console.log('------------');
  // console.log(modules);
  // console.log('------------');
} catch (e) {
  // do nothing
}
export default modules;
