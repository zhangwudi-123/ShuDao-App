{"ast":null,"code":"var _jsxFileName = \"F:\\\\project\\\\vsCode\\\\bc-app\\\\src\\\\pages\\\\RawMaterialWarehousing\\\\ManualSheet\\\\index.js\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport styles from './style.scss';\nimport { Page, PageContent, Card, Button, CardContent } from '@hvisions/f-ui';\nimport TransferBoxServices from '~/api/TransferBox';\nimport { onToast, createDialog } from '~/util/home';\n\nconst ManualSheet = _ref => {\n  let {\n    item\n  } = _ref;\n  const countRef = useRef(1);\n  const [loading, setLoading] = useState(false);\n  const [list, setList] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [showPreloader, setShowPreloader] = useState(false);\n  const [allowInfinite, setAllowInfinite] = useState(true);\n  const [ptrPreloader, setPtrPreloader] = useState(false);\n  const newStyle = {\n    background: '#ffdad4',\n    color: '#d83333'\n  };\n  const onGoingStyle = {\n    background: '#E1EDFF',\n    color: '#3D86F3'\n  };\n  const completeStyle = {\n    background: '#D3F0E9',\n    color: '#42BB9E'\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async keyWord => {\n    setLoading(true);\n    const searchData = {\n      pageSize: countRef.current,\n      type: 0\n    };\n    console.log('searchData', searchData);\n    await TransferBoxServices.getPage(searchData).then(res => {\n      console.log('res', res);\n      setList(res.content);\n      setTotal(res.totalElements);\n    }).catch(err => {\n      onToast(err.message, styles.toastError);\n    });\n    setLoading(false);\n  };\n\n  const loadMore = async () => {\n    if (!allowInfinite) return;\n    setShowPreloader(true);\n\n    if (countRef.current >= total) {\n      setShowPreloader(false);\n      return;\n    }\n\n    setAllowInfinite(false);\n    countRef.current = countRef.current + 1;\n    await loadData();\n    await setAllowInfinite(true);\n  };\n\n  const onHandleRefresh = async done => {\n    await setPtrPreloader(true);\n    await loadData();\n    await setPtrPreloader(false);\n    await done();\n  };\n\n  return /*#__PURE__*/React.createElement(PageContent, {\n    infinite: true,\n    infiniteDistance: 50,\n    infinitePreloader: showPreloader,\n    onInfinite: loadMore,\n    ptrPreloader: ptrPreloader,\n    ptr: true,\n    onPtrRefresh: onHandleRefresh,\n    onPtrPullStart: () => {\n      setPtrPreloader(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '0 16px',\n      backgroundColor: '#f4f5f5'\n    },\n    className: styles.tabContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles['div-ul'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, '托盘手动下架')), list.map((value, index) => {\n    return /*#__PURE__*/React.createElement(Card, {\n      key: index,\n      className: styles['card'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles['card-ul'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-next-title'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, \"\\u6258\\u76D8\\u53F7\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-next-title'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, value.code || '')), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-next-title'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, \"\\u4EFB\\u52A1\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-next-title'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, value.taskStatus || '')), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-next-title'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"\\u6258\\u76D8\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles['li-status'],\n      style: value.state == '空闲' ? newStyle : onGoingStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }, value.state || ''))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['card-div'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      fill: true,\n      round: true,\n      className: styles['bottom-btn-confirm'] // onClick={handleConfirm}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, \"\\u4E0B\\u67B6\")));\n  }))));\n};\n\nexport default ManualSheet;","map":{"version":3,"names":["React","useState","useRef","useEffect","styles","Page","PageContent","Card","Button","CardContent","TransferBoxServices","onToast","createDialog","ManualSheet","item","countRef","loading","setLoading","list","setList","total","setTotal","showPreloader","setShowPreloader","allowInfinite","setAllowInfinite","ptrPreloader","setPtrPreloader","newStyle","background","color","onGoingStyle","completeStyle","loadData","keyWord","searchData","pageSize","current","type","console","log","getPage","then","res","content","totalElements","catch","err","message","toastError","loadMore","onHandleRefresh","done","padding","backgroundColor","tabContainer","map","value","index","code","taskStatus","state"],"sources":["F:/project/vsCode/bc-app/src/pages/RawMaterialWarehousing/ManualSheet/index.js"],"sourcesContent":["import React ,{useState,useRef,useEffect} from 'react';\r\nimport styles from './style.scss';\r\nimport { Page, PageContent, Card, Button, CardContent } from '@hvisions/f-ui';\r\nimport TransferBoxServices from '~/api/TransferBox';\r\nimport { onToast, createDialog } from '~/util/home';\r\n\r\nconst ManualSheet = ({ item }) => {\r\n  const countRef = useRef(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [list, setList] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [showPreloader, setShowPreloader] = useState(false);\r\n  const [allowInfinite, setAllowInfinite] = useState(true);\r\n  const [ptrPreloader, setPtrPreloader] = useState(false);\r\n\r\n  const newStyle = {\r\n    background: '#ffdad4',\r\n    color: '#d83333'\r\n  };\r\n  const onGoingStyle = {\r\n    background: '#E1EDFF',\r\n    color: '#3D86F3'\r\n  };\r\n  const completeStyle = {\r\n    background: '#D3F0E9',\r\n    color: '#42BB9E'\r\n  };\r\n\r\n  useEffect(() => {\r\n      loadData();\r\n  }, []);\r\n\r\n  const loadData = async keyWord => {\r\n    setLoading(true);\r\n    const searchData = {\r\n      pageSize: countRef.current,\r\n      type: 0 ,\r\n    };\r\n    console.log('searchData',searchData);\r\n    await TransferBoxServices.getPage(searchData)\r\n    .then(res => {\r\n      console.log('res',res);\r\n        setList(res.content);\r\n        setTotal(res.totalElements);\r\n    })\r\n      .catch(err => {\r\n        onToast(err.message, styles.toastError);\r\n      });\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadMore = async () => {\r\n    if (!allowInfinite) return;\r\n    setShowPreloader(true);\r\n    if (countRef.current >= total) {\r\n      setShowPreloader(false);\r\n      return;\r\n    }\r\n    setAllowInfinite(false);\r\n    countRef.current = countRef.current + 1;\r\n    await loadData();\r\n    await setAllowInfinite(true);\r\n  };\r\n\r\n  const onHandleRefresh = async done => {\r\n    await setPtrPreloader(true);\r\n    await loadData();\r\n    await setPtrPreloader(false);\r\n    await done();\r\n  };\r\n\r\n  return (\r\n    <PageContent\r\n      infinite\r\n      infiniteDistance={50}\r\n      infinitePreloader={showPreloader}\r\n      onInfinite={loadMore}\r\n      ptrPreloader={ptrPreloader}\r\n      ptr\r\n      onPtrRefresh={onHandleRefresh}\r\n      onPtrPullStart={() => {\r\n        setPtrPreloader(true);\r\n      }}\r\n    >\r\n      <div\r\n        style={{ padding: '0 16px', backgroundColor: '#f4f5f5' }}\r\n        className={styles.tabContainer}\r\n      >\r\n        <ul className={styles['div-ul']}>\r\n          <li>\r\n            <span className={styles['li-title']}>{'托盘手动下架'}</span>\r\n          </li>\r\n          {list.map((value, index) => {\r\n            return (\r\n              <Card key={index} className={styles['card']}>\r\n                <ul className={styles['card-ul']}>\r\n                  <li>\r\n                    <span className={styles['li-next-title']}>托盘号</span>\r\n                    <span className={styles['li-next-title']}>{value.code || ''}</span>\r\n                  </li>\r\n                  <li>\r\n                    <span className={styles['li-next-title']}>任务状态</span>\r\n                    <span className={styles['li-next-title']}>{value.taskStatus || ''}</span>\r\n                  </li>\r\n                  <li>\r\n                    <span className={styles['li-next-title']}>托盘状态</span>\r\n                    {/* <span className={styles['li-next-title']}>{value.state || ''}</span> */}\r\n                    <span\r\n                      className={styles['li-status']}\r\n                      style={value.state == '空闲' ? newStyle : onGoingStyle}\r\n                    >\r\n                      {value.state || ''}\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n                <div className={styles['card-div']}>\r\n                  <Button\r\n                    fill\r\n                    round\r\n                    className={styles['bottom-btn-confirm']}\r\n                    // onClick={handleConfirm}\r\n                  >\r\n                    下架\r\n                  </Button>\r\n                </div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </PageContent>\r\n  );\r\n};\r\n\r\nexport default ManualSheet;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}