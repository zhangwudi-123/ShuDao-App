{"ast":null,"code":"var _jsxFileName = \"F:\\\\project\\\\vsCode\\\\yw-app\\\\src\\\\pages\\\\WarehousinManage\\\\Stocktakin\\\\Location\\\\index.js\";\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Page, Navbar, PageContent, Searchbar, NavLeft, NavTitle, Button } from '@hvisions/f-ui';\nimport { session } from '@hvisions/toolkit';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport PropTypes from 'prop-types';\nimport { isEmpty } from 'lodash';\nimport 'react-circular-progressbar/dist/styles.css';\nimport backIcon from '../../img/backIcon.png';\nimport styles from './style.scss';\nimport ScanPop from '~/pages/Scan/ScanPop';\nimport { tree } from '@hvisions/toolkit';\nimport stockService from '~/api/stocktakin';\nimport { Skeleton, Empty } from '~/components';\nimport { onToast } from '~/util/home';\nconst {\n  formatTree\n} = tree;\n\nconst LocationSelect = _ref => {\n  let {\n    f7router,\n    orderLineId,\n    purchaseOrderDetail,\n    treeData\n  } = _ref;\n  const [loading, setLoading] = useState(false);\n  const [orderId, setOrderId] = useState(orderLineId); // const [treeData, setTreeData] = useState([]);\n\n  const [locationList, setLocationList] = useState([]); // const [purchaseOrderDetail, setPurchaseOrderDetail] = useState(null);\n\n  const [tableData, setTableData] = useState([]);\n  const [waresId, setWaresId] = useState('');\n  const [locationId, setLocationId] = useState('');\n  const [waresName, setWaresName] = useState('');\n  const [locationName, setLocationName] = useState('');\n  useEffect(() => {\n    purchaseOrderDetail && setWaresId(purchaseOrderDetail.parentLocationId);\n    purchaseOrderDetail && setWaresName(purchaseOrderDetail.parentLocationName);\n    purchaseOrderDetail && setLocationId(purchaseOrderDetail.locationId);\n    purchaseOrderDetail && setLocationName(purchaseOrderDetail.locationName);\n    const data = treeData && treeData.length > 0 && treeData.filter(item => item.id == purchaseOrderDetail.parentLocationId);\n    data && data.length > 0 && setLocationList(data[0].children);\n  }, []);\n\n  const handleComplete = () => {\n    if (!waresId || !locationId) {\n      onToast('请选择仓位信息', styles.toastWarn);\n      return;\n    }\n\n    f7router.navigate('/stocktakinDetail', {\n      props: {\n        orderLineId,\n        selectedWaresId: waresId,\n        selectedLocationId: locationId,\n        waresName,\n        locationName,\n        initData: purchaseOrderDetail\n      }\n    });\n  };\n\n  const handleGoBack = () => {\n    f7router.navigate('/stocktakinDetail', {\n      transition: 'ne-backward',\n      props: {\n        orderLineId,\n        selectedWaresId: waresId,\n        selectedLocationId: locationId,\n        waresName,\n        locationName,\n        initData: purchaseOrderDetail\n      }\n    });\n  };\n\n  const handleWares = item => {\n    setWaresId(item.id);\n    setLocationList(item.children);\n    setWaresName(item.name);\n    setLocationId(item.id);\n    setLocationName(item.name);\n  };\n\n  const handleLocation = item => {\n    setLocationId(item.id);\n    setLocationName(item.name);\n  };\n\n  return /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: handleGoBack,\n    className: styles['nav-left'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"\",\n    style: {\n      height: 24\n    },\n    src: backIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(NavTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, \"\\u9009\\u62E9\\u4ED3\\u4F4D\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['content-box'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['wares-box'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, !isEmpty(treeData) && treeData.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item.id,\n      className: waresId == item.id ? styles['wares-item-active'] : styles['wares-item'],\n      onClick: () => {\n        handleWares(item);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, item.name);\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ne-bottom-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fill: true,\n    onClick: handleComplete,\n    className: \"ne-bottom-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"\\u786E\\u8BA4\\u9009\\u4E2D\"))));\n};\n\nexport default LocationSelect;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Page","Navbar","PageContent","Searchbar","NavLeft","NavTitle","Button","session","CircularProgressbarWithChildren","buildStyles","PropTypes","isEmpty","backIcon","styles","ScanPop","tree","stockService","Skeleton","Empty","onToast","formatTree","LocationSelect","f7router","orderLineId","purchaseOrderDetail","treeData","loading","setLoading","orderId","setOrderId","locationList","setLocationList","tableData","setTableData","waresId","setWaresId","locationId","setLocationId","waresName","setWaresName","locationName","setLocationName","parentLocationId","parentLocationName","data","length","filter","item","id","children","handleComplete","toastWarn","navigate","props","selectedWaresId","selectedLocationId","initData","handleGoBack","transition","handleWares","name","handleLocation","height","map","index"],"sources":["F:/project/vsCode/yw-app/src/pages/WarehousinManage/Stocktakin/Location/index.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Page, Navbar, PageContent, Searchbar, NavLeft, NavTitle, Button } from '@hvisions/f-ui';\r\nimport { session } from '@hvisions/toolkit';\r\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\r\nimport PropTypes from 'prop-types';\r\nimport { isEmpty } from 'lodash';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport backIcon from '../../img/backIcon.png';\r\nimport styles from './style.scss';\r\nimport ScanPop from '~/pages/Scan/ScanPop';\r\nimport { tree } from '@hvisions/toolkit';\r\nimport stockService from '~/api/stocktakin';\r\nimport { Skeleton, Empty } from '~/components';\r\nimport { onToast } from '~/util/home';\r\n\r\nconst { formatTree } = tree;\r\n\r\nconst LocationSelect = ({ f7router, orderLineId, purchaseOrderDetail, treeData }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [orderId, setOrderId] = useState(orderLineId);\r\n  // const [treeData, setTreeData] = useState([]);\r\n  const [locationList, setLocationList] = useState([]);\r\n  // const [purchaseOrderDetail, setPurchaseOrderDetail] = useState(null);\r\n  const [tableData, setTableData] = useState([]);\r\n  const [waresId, setWaresId] = useState('');\r\n  const [locationId, setLocationId] = useState('');\r\n  const [waresName, setWaresName] = useState('');\r\n  const [locationName, setLocationName] = useState('');\r\n\r\n  useEffect(() => {\r\n    purchaseOrderDetail && setWaresId(purchaseOrderDetail.parentLocationId);\r\n    purchaseOrderDetail && setWaresName(purchaseOrderDetail.parentLocationName);\r\n    purchaseOrderDetail && setLocationId(purchaseOrderDetail.locationId);\r\n    purchaseOrderDetail && setLocationName(purchaseOrderDetail.locationName);\r\n    const data =\r\n      treeData &&\r\n      treeData.length > 0 &&\r\n      treeData.filter(item => item.id == purchaseOrderDetail.parentLocationId);\r\n    data && data.length > 0 && setLocationList(data[0].children);\r\n  }, []);\r\n\r\n  const handleComplete = () => {\r\n    if (!waresId || !locationId) {\r\n      onToast('请选择仓位信息', styles.toastWarn);\r\n      return;\r\n    }\r\n    f7router.navigate('/stocktakinDetail', {\r\n      props: {\r\n        orderLineId,\r\n        selectedWaresId: waresId,\r\n        selectedLocationId: locationId,\r\n        waresName,\r\n        locationName,\r\n        initData: purchaseOrderDetail\r\n      }\r\n    });\r\n  };\r\n  const handleGoBack = () => {\r\n    f7router.navigate('/stocktakinDetail', {\r\n      transition: 'ne-backward',\r\n      props: {\r\n        orderLineId,\r\n        selectedWaresId: waresId,\r\n        selectedLocationId: locationId,\r\n        waresName,\r\n        locationName,\r\n        initData: purchaseOrderDetail\r\n      }\r\n    });\r\n  };\r\n  const handleWares = item => {\r\n    setWaresId(item.id);\r\n    setLocationList(item.children);\r\n    setWaresName(item.name);\r\n    setLocationId(item.id);\r\n    setLocationName(item.name);\r\n  };\r\n  const handleLocation = item => {\r\n    setLocationId(item.id);\r\n    setLocationName(item.name);\r\n  };\r\n  return (\r\n    <Page>\r\n      <Navbar>\r\n        <NavLeft>\r\n          <a onClick={handleGoBack} className={styles['nav-left']}>\r\n            <img alt=\"\" style={{ height: 24 }} src={backIcon} />\r\n          </a>\r\n        </NavLeft>\r\n        <NavTitle>选择仓位</NavTitle>\r\n      </Navbar>\r\n\r\n      <div className={styles['content-box']}>\r\n        <div className={styles['wares-box']}>\r\n          {!isEmpty(treeData) &&\r\n            treeData.map((item, index) => {\r\n              return (\r\n                <div\r\n                  key={item.id}\r\n                  className={\r\n                    waresId == item.id ? styles['wares-item-active'] : styles['wares-item']\r\n                  }\r\n                  onClick={() => {\r\n                    handleWares(item);\r\n                  }}\r\n                >\r\n                  {item.name}\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n\r\n        <div className=\"ne-bottom-container\">\r\n          <Button fill onClick={handleComplete} className=\"ne-bottom-btn\">\r\n            确认选中\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default LocationSelect;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}