{"ast":null,"code":"import $ from 'dom7';\nimport Utils from '../../utils/utils';\nexport default class TouchRipple {\n  constructor($el, x, y) {\n    const ripple = this;\n    if (!$el) return undefined;\n    const box = $el[0].getBoundingClientRect();\n    const center = {\n      x: x - box.left,\n      y: y - box.top\n    };\n    const width = box.width;\n    const height = box.height;\n    const diameter = Math.max((height ** 2 + width ** 2) ** 0.5, 48);\n    ripple.$rippleWaveEl = $(`<div class=\"ripple-wave\" style=\"width: ${diameter}px; height: ${diameter}px; margin-top:-${diameter / 2}px; margin-left:-${diameter / 2}px; left:${center.x}px; top:${center.y}px;\"></div>`);\n    $el.prepend(ripple.$rippleWaveEl);\n    ripple.rippleTransform = `translate3d(${-center.x + width / 2}px, ${-center.y + height / 2}px, 0) scale(1)`;\n    Utils.nextFrame(() => {\n      if (!ripple || !ripple.$rippleWaveEl) return;\n      ripple.$rippleWaveEl.transform(ripple.rippleTransform);\n    });\n    return ripple;\n  }\n\n  destroy() {\n    let ripple = this;\n\n    if (ripple.$rippleWaveEl) {\n      ripple.$rippleWaveEl.remove();\n    }\n\n    Object.keys(ripple).forEach(key => {\n      ripple[key] = null;\n      delete ripple[key];\n    });\n    ripple = null;\n  }\n\n  remove() {\n    const ripple = this;\n    if (ripple.removing) return;\n    const $rippleWaveEl = this.$rippleWaveEl;\n    const rippleTransform = this.rippleTransform;\n    let removeTimeout = Utils.nextTick(() => {\n      ripple.destroy();\n    }, 400);\n    ripple.removing = true;\n    $rippleWaveEl.addClass('ripple-wave-fill').transform(rippleTransform.replace('scale(1)', 'scale(1.01)')).transitionEnd(() => {\n      clearTimeout(removeTimeout);\n      Utils.nextFrame(() => {\n        $rippleWaveEl.addClass('ripple-wave-out').transform(rippleTransform.replace('scale(1)', 'scale(1.01)'));\n        removeTimeout = Utils.nextTick(() => {\n          ripple.destroy();\n        }, 700);\n        $rippleWaveEl.transitionEnd(() => {\n          clearTimeout(removeTimeout);\n          ripple.destroy();\n        });\n      });\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}