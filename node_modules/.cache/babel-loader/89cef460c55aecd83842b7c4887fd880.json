{"ast":null,"code":"import { QRScanner } from '@ionic-native/qr-scanner';\nlet scanSub;\nexport const scan = () => {\n  return QRScanner.prepare().then(status => {\n    console.log(status);\n\n    if (status.authorized) {\n      // camera permission was granted\n      // start scanning\n      QRScanner.show(); // eslint-disable-next-line compat/compat\n\n      return new Promise((resolve, reject) => {\n        scanSub = QRScanner.scan().subscribe(text => {\n          cancel();\n          resolve(text);\n        });\n      });\n    } else if (status.denied) {\n      // camera permission was permanently denied\n      // you must use QRScanner.openSettings() method to guide the user to the settings page\n      // then they can grant the permission from there\n      return 'denied';\n    } else {\n      // permission was denied, but not permanently. You can ask for permission again at a later time.\n      return 'something wrong';\n    }\n  });\n};\nexport const cancel = () => {\n  if (scanSub) {\n    console.log('cancel QRScanner');\n    QRScanner.hide(); // hide camera preview\n\n    scanSub.unsubscribe(); // stop scanning\n  }\n\n  QRScanner.destroy();\n};\nexport const toggleCamera = () => {\n  QRScanner.getStatus(status => {\n    QRScanner.useCamera(status.currentCamera ? 0 : 1);\n  });\n};\nexport const toggleLight = () => {\n  QRScanner.getStatus(status => {\n    status.lightEnabled ? QRScanner.disableLight() : QRScanner.enableLight();\n  });\n};","map":{"version":3,"names":["QRScanner","scanSub","scan","prepare","then","status","console","log","authorized","show","Promise","resolve","reject","subscribe","text","cancel","denied","hide","unsubscribe","destroy","toggleCamera","getStatus","useCamera","currentCamera","toggleLight","lightEnabled","disableLight","enableLight"],"sources":["F:/project/vsCode/yw-app/src/plugins/QRScanner.js"],"sourcesContent":["import { QRScanner } from '@ionic-native/qr-scanner';\r\n\r\nlet scanSub;\r\n\r\nexport const scan = () => {\r\n  return QRScanner.prepare().then(status => {\r\n    console.log(status);\r\n    if (status.authorized) {\r\n      // camera permission was granted\r\n\r\n      // start scanning\r\n      QRScanner.show();\r\n      // eslint-disable-next-line compat/compat\r\n      return new Promise((resolve, reject) => {\r\n        scanSub = QRScanner.scan().subscribe(text => {\r\n          cancel();\r\n          resolve(text);\r\n        });\r\n      });\r\n    } else if (status.denied) {\r\n      // camera permission was permanently denied\r\n      // you must use QRScanner.openSettings() method to guide the user to the settings page\r\n      // then they can grant the permission from there\r\n      return 'denied';\r\n    } else {\r\n      // permission was denied, but not permanently. You can ask for permission again at a later time.\r\n      return 'something wrong';\r\n    }\r\n  });\r\n};\r\n\r\nexport const cancel = () => {\r\n  if (scanSub) {\r\n    console.log('cancel QRScanner');\r\n    QRScanner.hide(); // hide camera preview\r\n    scanSub.unsubscribe(); // stop scanning\r\n  }\r\n  QRScanner.destroy();\r\n};\r\n\r\nexport const toggleCamera = () => {\r\n  QRScanner.getStatus(status => {\r\n    QRScanner.useCamera(status.currentCamera ? 0 : 1);\r\n  });\r\n};\r\nexport const toggleLight = () => {\r\n  QRScanner.getStatus(status => {\r\n    status.lightEnabled ? QRScanner.disableLight() : QRScanner.enableLight();\r\n  });\r\n};\r\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,0BAA1B;AAEA,IAAIC,OAAJ;AAEA,OAAO,MAAMC,IAAI,GAAG,MAAM;EACxB,OAAOF,SAAS,CAACG,OAAV,GAAoBC,IAApB,CAAyBC,MAAM,IAAI;IACxCC,OAAO,CAACC,GAAR,CAAYF,MAAZ;;IACA,IAAIA,MAAM,CAACG,UAAX,EAAuB;MACrB;MAEA;MACAR,SAAS,CAACS,IAAV,GAJqB,CAKrB;;MACA,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACtCX,OAAO,GAAGD,SAAS,CAACE,IAAV,GAAiBW,SAAjB,CAA2BC,IAAI,IAAI;UAC3CC,MAAM;UACNJ,OAAO,CAACG,IAAD,CAAP;QACD,CAHS,CAAV;MAID,CALM,CAAP;IAMD,CAZD,MAYO,IAAIT,MAAM,CAACW,MAAX,EAAmB;MACxB;MACA;MACA;MACA,OAAO,QAAP;IACD,CALM,MAKA;MACL;MACA,OAAO,iBAAP;IACD;EACF,CAvBM,CAAP;AAwBD,CAzBM;AA2BP,OAAO,MAAMD,MAAM,GAAG,MAAM;EAC1B,IAAId,OAAJ,EAAa;IACXK,OAAO,CAACC,GAAR,CAAY,kBAAZ;IACAP,SAAS,CAACiB,IAAV,GAFW,CAEO;;IAClBhB,OAAO,CAACiB,WAAR,GAHW,CAGY;EACxB;;EACDlB,SAAS,CAACmB,OAAV;AACD,CAPM;AASP,OAAO,MAAMC,YAAY,GAAG,MAAM;EAChCpB,SAAS,CAACqB,SAAV,CAAoBhB,MAAM,IAAI;IAC5BL,SAAS,CAACsB,SAAV,CAAoBjB,MAAM,CAACkB,aAAP,GAAuB,CAAvB,GAA2B,CAA/C;EACD,CAFD;AAGD,CAJM;AAKP,OAAO,MAAMC,WAAW,GAAG,MAAM;EAC/BxB,SAAS,CAACqB,SAAV,CAAoBhB,MAAM,IAAI;IAC5BA,MAAM,CAACoB,YAAP,GAAsBzB,SAAS,CAAC0B,YAAV,EAAtB,GAAiD1B,SAAS,CAAC2B,WAAV,EAAjD;EACD,CAFD;AAGD,CAJM"},"metadata":{},"sourceType":"module"}