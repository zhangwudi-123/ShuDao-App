{"ast":null,"code":"var _jsxFileName = \"F:\\\\project\\\\vsCode\\\\bc-app\\\\src\\\\pages\\\\RawMaterialWarehousing\\\\Manual\\\\cardInfo.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Card, Button } from '@hvisions/f-ui';\nimport styles from './cardInfo.scss';\nimport { onToast, createDialog } from '~/util/home';\nimport { Sheet } from 'framework7-react';\n\nconst CardInfo = _ref => {\n  let {\n    item\n  } = _ref;\n  const newStyle = {\n    background: '#ffdad4',\n    color: '#d83333'\n  };\n  const onGoingStyle = {\n    background: '#E1EDFF',\n    color: '#3D86F3'\n  };\n\n  const handleAutomatic = () => {\n    createDialog('托盘自动下架', '确认开始托盘自动下架流程？', function () {\n      try {\n        Automatic(); // onToast('托盘自动下架成功', styles.toastSuccess);\n      } catch (error) {\n        console.log('error', error);\n        onToast('托盘自动下架失败', styles.toastError);\n      }\n    });\n  };\n\n  const handleSaveManual = async () => {\n    //托盘出库   托盘下架  新增\n    const data = {\n      trayNumber: selectedDatas[0].code,\n      inType: 6,\n      //原料托盘出库\n      state: 0,\n      destination: '原材料组托点',\n      middle: 'J001'\n    };\n    await EmptyPalletDeliveryApi.saveOrUpdate(data).then(res => {\n      notification.success({\n        message: '托盘出库任务创建成功'\n      }); // loadData(page, pageSize, { ...searchValue, state: selectedstatus });\n\n      handleCancelManual();\n    }).catch(err => {\n      notification.warning({\n        description: err.message\n      });\n    });\n  };\n\n  const Automatic = async () => {// const data ={\n    //   destination:'原材料组托点',\n    //   middle:'J001',\n    //   taskType:6, //原料托盘出库\n    //   transferType:0 //原料托盘\n    // }\n    // await EmptyPalletDeliveryApi.autoTransferOut(data)\n    // .then(res=>{\n    //   onToast('托盘自动下架成功', styles.toastSuccess);\n    //   loadData(selectValue);\n    // })\n    // .catch(err=>{\n    //   onToast(err.message, styles.toastError);\n    // })\n    // //托盘出库   托盘自动出库\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles['card'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles['card-ul'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 22\n    }\n  }, \"\\u6258\\u76D8\\u53F7\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 22\n    }\n  }, item.code || '')), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 22\n    }\n  }, \"\\u4EFB\\u52A1\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  }, item.taskStatus || '')), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 22\n    }\n  }, \"\\u6258\\u76D8\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-status'],\n    style: item.state == '空闲' ? newStyle : onGoingStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 22\n    }\n  }, item.state || ''))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['card-div'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fill: true,\n    round: true,\n    className: styles['bottom-btn-confirm'] // onClick={handleConfirm}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, \"\\u4E0B\\u67B6\")));\n};\n\nexport default CardInfo;","map":{"version":3,"names":["React","useEffect","useState","Card","Button","styles","onToast","createDialog","Sheet","CardInfo","item","newStyle","background","color","onGoingStyle","handleAutomatic","Automatic","error","console","log","toastError","handleSaveManual","data","trayNumber","selectedDatas","code","inType","state","destination","middle","EmptyPalletDeliveryApi","saveOrUpdate","then","res","notification","success","message","handleCancelManual","catch","err","warning","description","taskStatus"],"sources":["F:/project/vsCode/bc-app/src/pages/RawMaterialWarehousing/Manual/cardInfo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Card, Button } from '@hvisions/f-ui';\r\nimport styles from './cardInfo.scss';\r\nimport { onToast, createDialog } from '~/util/home';\r\nimport { Sheet } from 'framework7-react';\r\n\r\nconst CardInfo = ({ item }) => {\r\n  const newStyle = {\r\n    background: '#ffdad4',\r\n    color: '#d83333'\r\n  };\r\n  const onGoingStyle = {\r\n    background: '#E1EDFF',\r\n    color: '#3D86F3'\r\n  };\r\n\r\n  \r\n  const handleAutomatic = ()=>{\r\n    createDialog(\r\n      '托盘自动下架',\r\n      '确认开始托盘自动下架流程？',\r\n      function() {\r\n        try {\r\n          Automatic()\r\n          // onToast('托盘自动下架成功', styles.toastSuccess);\r\n        } catch (error) {\r\n          console.log('error',error);\r\n          onToast('托盘自动下架失败', styles.toastError);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  const handleSaveManual = async () => {\r\n    //托盘出库   托盘下架  新增\r\n    const data = {\r\n      trayNumber: selectedDatas[0].code,\r\n      inType: 6, //原料托盘出库\r\n      state: 0,\r\n      destination: '原材料组托点',\r\n      middle: 'J001',\r\n    }\r\n    await EmptyPalletDeliveryApi.saveOrUpdate(data)\r\n      .then(res => {\r\n        notification.success({\r\n          message: '托盘出库任务创建成功'\r\n        });\r\n        // loadData(page, pageSize, { ...searchValue, state: selectedstatus });\r\n        handleCancelManual();\r\n      })\r\n      .catch(err => {\r\n        notification.warning({\r\n          description: err.message\r\n        });\r\n      })\r\n  }\r\n\r\n  const Automatic = async () => {\r\n    // const data ={\r\n    //   destination:'原材料组托点',\r\n    //   middle:'J001',\r\n    //   taskType:6, //原料托盘出库\r\n    //   transferType:0 //原料托盘\r\n    // }\r\n    // await EmptyPalletDeliveryApi.autoTransferOut(data)\r\n    // .then(res=>{\r\n    //   onToast('托盘自动下架成功', styles.toastSuccess);\r\n    //   loadData(selectValue);\r\n    // })\r\n    // .catch(err=>{\r\n    //   onToast(err.message, styles.toastError);\r\n    // })\r\n    // //托盘出库   托盘自动出库\r\n  }\r\n\r\n  return (\r\n      <Card className={styles['card']}>\r\n \r\n                 <ul className={styles['card-ul']}>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>托盘号</span>\r\n                     <span className={styles['li-next-title']}>{item.code || ''}</span>\r\n                   </li>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>任务状态</span>\r\n                     <span className={styles['li-next-title']}>{item.taskStatus || ''}</span>\r\n                   </li>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>托盘状态</span>\r\n                     <span\r\n                      className={styles['li-status']}\r\n                      style={item.state == '空闲' ? newStyle : onGoingStyle}\r\n                    >\r\n                      {item.state || ''}\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n                <div className={styles['card-div']}>\r\n                  <Button\r\n                    fill\r\n                    round\r\n                    className={styles['bottom-btn-confirm']}\r\n                    // onClick={handleConfirm}\r\n                  >\r\n                    下架\r\n                  </Button>\r\n                </div>\r\n \r\n      </Card>\r\n\r\n  );\r\n};\r\n\r\nexport default CardInfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}