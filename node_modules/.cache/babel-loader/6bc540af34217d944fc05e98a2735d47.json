{"ast":null,"code":"var _jsxFileName = \"F:\\\\project\\\\vsCode\\\\bc-app\\\\src\\\\pages\\\\RawMaterialWarehousing\\\\Manual\\\\cardInfo.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Card, Button } from '@hvisions/f-ui';\nimport styles from './cardInfo.scss';\nimport { onToast, createDialog } from '~/util/home';\nimport EmptyPalletDeliveryApi from '~/api/EmptyPalletDelivery';\n\nconst CardInfo = _ref => {\n  let {\n    item,\n    loadData,\n    f7router\n  } = _ref;\n  const newStyle = {\n    background: '#ffdad4',\n    color: '#d83333'\n  };\n  const onGoingStyle = {\n    background: '#E1EDFF',\n    color: '#3D86F3'\n  };\n\n  const handleSaveManual = () => {\n    createDialog('托盘手动下架', '确认开始托盘下架流程？', function () {\n      try {\n        Manual(); // onToast('托盘自动下架成功', styles.toastSuccess);\n      } catch (error) {\n        console.log('error', error);\n        onToast('托盘下架失败', styles.toastError);\n      }\n    });\n  };\n\n  const Manual = async () => {\n    //托盘出库   托盘下架  新增\n    const data = {\n      trayNumber: item.code,\n      inType: 6,\n      //原料托盘出库\n      state: 0,\n      destination: '原材料组托点',\n      middle: 'J001'\n    };\n    await EmptyPalletDeliveryApi.saveOrUpdate(data).then(res => {\n      onToast('托盘自动下架成功', styles.toastSuccess);\n      f7router.back();\n      loadData();\n    }).catch(err => {\n      onToast(err.message, styles.toastError);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles['card'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles['card-ul'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 22\n    }\n  }, \"\\u6258\\u76D8\\u53F7\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 22\n    }\n  }, item.code || '')), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 22\n    }\n  }, \"\\u4EFB\\u52A1\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 22\n    }\n  }, item.taskStatus || '')), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-next-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 22\n    }\n  }, \"\\u6258\\u76D8\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles['li-status'],\n    style: item.state == '空闲' ? newStyle : onGoingStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 22\n    }\n  }, item.state || ''))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['card-div'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fill: true,\n    round: true,\n    className: styles['bottom-btn-confirm'],\n    onClick: handleSaveManual,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, \"\\u4E0B\\u67B6\")));\n};\n\nexport default CardInfo;","map":{"version":3,"names":["React","useEffect","useState","Card","Button","styles","onToast","createDialog","EmptyPalletDeliveryApi","CardInfo","item","loadData","f7router","newStyle","background","color","onGoingStyle","handleSaveManual","Manual","error","console","log","toastError","data","trayNumber","code","inType","state","destination","middle","saveOrUpdate","then","res","toastSuccess","back","catch","err","message","taskStatus"],"sources":["F:/project/vsCode/bc-app/src/pages/RawMaterialWarehousing/Manual/cardInfo.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Card, Button } from '@hvisions/f-ui';\r\nimport styles from './cardInfo.scss';\r\nimport { onToast, createDialog } from '~/util/home';\r\nimport EmptyPalletDeliveryApi from '~/api/EmptyPalletDelivery';\r\n\r\nconst CardInfo = ({ item,loadData,f7router }) => {\r\n  const newStyle = {\r\n    background: '#ffdad4',\r\n    color: '#d83333'\r\n  };\r\n  const onGoingStyle = {\r\n    background: '#E1EDFF',\r\n    color: '#3D86F3'\r\n  };\r\n\r\n  \r\n  const handleSaveManual = ()=>{\r\n    createDialog(\r\n      '托盘手动下架',\r\n      '确认开始托盘下架流程？',\r\n      function() {\r\n        try {\r\n          Manual()\r\n          // onToast('托盘自动下架成功', styles.toastSuccess);\r\n        } catch (error) {\r\n          console.log('error',error);\r\n          onToast('托盘下架失败', styles.toastError);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  const Manual = async () => {\r\n    //托盘出库   托盘下架  新增\r\n    const data = {\r\n      trayNumber: item.code,\r\n      inType: 6, //原料托盘出库\r\n      state: 0,\r\n      destination: '原材料组托点',\r\n      middle: 'J001',\r\n    }\r\n    await EmptyPalletDeliveryApi.saveOrUpdate(data)\r\n      .then(res => {\r\n      onToast('托盘自动下架成功', styles.toastSuccess);\r\n      f7router.back()\r\n      loadData();\r\n    })\r\n    .catch(err=>{\r\n      onToast(err.message, styles.toastError);\r\n    })\r\n  }\r\n\r\n  return (\r\n      <Card className={styles['card']}> \r\n                 <ul className={styles['card-ul']}>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>托盘号</span>\r\n                     <span className={styles['li-next-title']}>{item.code || ''}</span>\r\n                   </li>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>任务状态</span>\r\n                     <span className={styles['li-next-title']}>{item.taskStatus || ''}</span>\r\n                   </li>\r\n                   <li>\r\n                     <span className={styles['li-next-title']}>托盘状态</span>\r\n                     <span\r\n                      className={styles['li-status']}\r\n                      style={item.state == '空闲' ? newStyle : onGoingStyle}\r\n                    >\r\n                      {item.state || ''}\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n                <div className={styles['card-div']}>\r\n                  <Button\r\n                    fill\r\n                    round\r\n                    className={styles['bottom-btn-confirm']}\r\n                    onClick={handleSaveManual}\r\n                  >\r\n                    下架\r\n                  </Button>\r\n                </div> \r\n      </Card>\r\n  );\r\n};\r\n\r\nexport default CardInfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}