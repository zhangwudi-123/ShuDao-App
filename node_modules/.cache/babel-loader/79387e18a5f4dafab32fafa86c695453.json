{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _Context = _interopRequireDefault(require(\"./Context\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  if (obj != null) {\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar getDisplayName = function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n/**\r\n *\r\n * @param {React.ReactNode} Component\r\n * @param {string | array} key eg: root.someLocation.top\r\n * @param {object} keyLocationMaps 对 key渲染位置 的定义， 可能这个 key 对应的渲染位置不是 children， 而是另一个 props\r\n * 每个 key 的默认 location 为 children\r\n */\n\n\nvar withConfig = function withConfig(Component, key) {\n  var keyLocationMaps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var ConfigComponent = function ConfigComponent(props) {\n    var renderContent = function renderContent(config) {\n      var children = [props.children];\n      var configProps = {};\n\n      var mergeComponent = function mergeComponent(comInConfg, k) {\n        if (keyLocationMaps[k]) {\n          var comInProps = props[keyLocationMaps[k]]; // 合并到新的 props\n\n          configProps[keyLocationMaps[k]] = _react.default.createElement(_react.default.Fragment, null, comInProps, comInConfg);\n        } else {\n          // 没有 key location 定义， 就放到 children 里\n          children.push(comInConfg);\n        }\n      };\n\n      if ((0, _lodash.isArray)(key)) {\n        key.forEach(function (k) {\n          var comInConfg = (0, _lodash.get)(config, k);\n          mergeComponent(comInConfg, k);\n        });\n      } else {\n        var comInConfg = (0, _lodash.get)(config, key);\n        mergeComponent(comInConfg, key);\n      }\n\n      return _react.default.createElement(Component, _extends({}, props, configProps), children.map(function (child, i) {\n        return _react.default.createElement(_react.Fragment, {\n          key: \"config_\".concat(i)\n        }, child);\n      }));\n    };\n\n    return _react.default.createElement(_Context.default.Consumer, null, renderContent);\n  };\n\n  ConfigComponent.displayName = \"withConfig([\".concat(key, \"]\").concat(getDisplayName(Component), \")\");\n  return ConfigComponent;\n};\n\nvar _default = withConfig;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}