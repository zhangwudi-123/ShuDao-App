{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\vsCode\\\\baicaho\\\\bc-app\\\\src\\\\pages\\\\WarehousinManage\\\\RetrievalManagerment\\\\Location\\\\index.js\";\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Page, Navbar, PageContent, Searchbar, NavLeft, NavTitle, Button } from '@hvisions/f-ui';\nimport { session } from '@hvisions/toolkit';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport PropTypes from 'prop-types';\nimport { isEmpty } from 'lodash';\nimport 'react-circular-progressbar/dist/styles.css';\nimport backIcon from '../../img/backIcon.png';\nimport styles from './style.scss';\nimport ScanPop from '~/pages/Scan/ScanPop';\nimport { tree } from '@hvisions/toolkit';\nimport stockService from '~/api/stocktakin';\nimport { Skeleton, Empty } from '~/components';\nimport { onToast } from '~/util/home';\nconst {\n  formatTree\n} = tree;\n\nconst LocationSelect = _ref => {\n  let {\n    f7router,\n    orderLineId,\n    batchItem,\n    state,\n    treeData,\n    backWaresId,\n    backLocationId,\n    backWaresName,\n    backLocationName,\n    paseBatchNum,\n    paseQuantity,\n    material,\n    purchaseOrderDetail,\n    createOrderID\n  } = _ref;\n  const [loading, setLoading] = useState(false);\n  const [orderId, setOrderId] = useState(orderLineId);\n  const [locationList, setLocationList] = useState([]);\n  const [tableData, setTableData] = useState([]);\n  const [waresId, setWaresId] = useState('');\n  const [locationId, setLocationId] = useState('');\n  const [waresName, setWaresName] = useState('');\n  const [locationName, setLocationName] = useState('');\n  useEffect(() => {\n    backWaresId && setWaresId(backWaresId);\n    backWaresName && setWaresName(backWaresName);\n    backLocationId && setLocationId(backLocationId);\n    backLocationName && setLocationName(backLocationName);\n    const data = treeData && treeData.length > 0 && treeData.filter(item => item.id == backWaresId);\n    data && data.length > 0 && setLocationList(data[0].children);\n  }, []);\n\n  const handleComplete = () => {\n    if (!waresId || !locationId) {\n      onToast('请选择仓位信息', styles.toastWarn);\n      return;\n    }\n\n    f7router.navigate('/retrieval-batch-list', {\n      props: {\n        orderLineId,\n        batchItem,\n        state,\n        treeData,\n        waresId,\n        locationId,\n        waresName,\n        locationName,\n        paseBatchNum,\n        paseQuantity,\n        material,\n        purchaseOrderDetail,\n        createOrderID\n      }\n    });\n  };\n\n  const handleGoBack = () => {\n    f7router.navigate('/retrieval-batch-list', {\n      transition: 'ne-backward',\n      props: {\n        orderLineId,\n        batchItem,\n        state,\n        treeData,\n        waresId,\n        locationId,\n        waresName,\n        locationName,\n        paseBatchNum,\n        paseQuantity,\n        material,\n        purchaseOrderDetail,\n        createOrderID\n      }\n    });\n  };\n\n  const handleWares = item => {\n    setWaresId(item.id);\n    setLocationList(item.children);\n    setWaresName(item.name);\n    setLocationId(item.id);\n    setLocationName(item.name);\n  };\n\n  const handleLocation = item => {\n    setLocationId(item.id);\n    setLocationName(item.name);\n  };\n\n  return /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: handleGoBack,\n    className: styles['nav-left'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"\",\n    style: {\n      height: 24\n    },\n    src: backIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(NavTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, \"\\u9009\\u62E9\\u4ED3\\u4F4D\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['content-box'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles['wares-box'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, !isEmpty(treeData) && treeData.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item.id,\n      className: waresId == item.id ? styles['wares-item-active'] : styles['wares-item'],\n      onClick: () => {\n        handleWares(item);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, item.name);\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ne-bottom-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fill: true,\n    onClick: handleComplete,\n    className: \"ne-bottom-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, \"\\u786E\\u8BA4\\u9009\\u4E2D\"))));\n};\n\nexport default LocationSelect;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Page","Navbar","PageContent","Searchbar","NavLeft","NavTitle","Button","session","CircularProgressbarWithChildren","buildStyles","PropTypes","isEmpty","backIcon","styles","ScanPop","tree","stockService","Skeleton","Empty","onToast","formatTree","LocationSelect","f7router","orderLineId","batchItem","state","treeData","backWaresId","backLocationId","backWaresName","backLocationName","paseBatchNum","paseQuantity","material","purchaseOrderDetail","createOrderID","loading","setLoading","orderId","setOrderId","locationList","setLocationList","tableData","setTableData","waresId","setWaresId","locationId","setLocationId","waresName","setWaresName","locationName","setLocationName","data","length","filter","item","id","children","handleComplete","toastWarn","navigate","props","handleGoBack","transition","handleWares","name","handleLocation","height","map","index"],"sources":["D:/project/vsCode/baicaho/bc-app/src/pages/WarehousinManage/RetrievalManagerment/Location/index.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Page, Navbar, PageContent, Searchbar, NavLeft, NavTitle, Button } from '@hvisions/f-ui';\r\nimport { session } from '@hvisions/toolkit';\r\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\r\nimport PropTypes from 'prop-types';\r\nimport { isEmpty } from 'lodash';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport backIcon from '../../img/backIcon.png';\r\nimport styles from './style.scss';\r\nimport ScanPop from '~/pages/Scan/ScanPop';\r\nimport { tree } from '@hvisions/toolkit';\r\nimport stockService from '~/api/stocktakin';\r\nimport { Skeleton, Empty } from '~/components';\r\nimport { onToast } from '~/util/home';\r\n\r\nconst { formatTree } = tree;\r\n\r\nconst LocationSelect = ({\r\n  f7router,\r\n  orderLineId,\r\n  batchItem,\r\n  state,\r\n  treeData,\r\n  backWaresId,\r\n  backLocationId,\r\n  backWaresName,\r\n  backLocationName,\r\n  paseBatchNum,\r\n  paseQuantity,\r\n  material,\r\n  purchaseOrderDetail,\r\n  createOrderID\r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [orderId, setOrderId] = useState(orderLineId);\r\n  const [locationList, setLocationList] = useState([]);\r\n  const [tableData, setTableData] = useState([]);\r\n  const [waresId, setWaresId] = useState('');\r\n  const [locationId, setLocationId] = useState('');\r\n  const [waresName, setWaresName] = useState('');\r\n  const [locationName, setLocationName] = useState('');\r\n\r\n  useEffect(() => {\r\n    backWaresId && setWaresId(backWaresId);\r\n    backWaresName && setWaresName(backWaresName);\r\n    backLocationId && setLocationId(backLocationId);\r\n    backLocationName && setLocationName(backLocationName);\r\n    const data = treeData && treeData.length > 0 && treeData.filter(item => item.id == backWaresId);\r\n    data && data.length > 0 && setLocationList(data[0].children);\r\n  }, []);\r\n\r\n  const handleComplete = () => {\r\n    if (!waresId || !locationId) {\r\n      onToast('请选择仓位信息', styles.toastWarn);\r\n      return;\r\n    }\r\n    f7router.navigate('/retrieval-batch-list', {\r\n      props: {\r\n        orderLineId,\r\n        batchItem,\r\n        state,\r\n        treeData,\r\n        waresId,\r\n        locationId,\r\n        waresName,\r\n        locationName,\r\n        paseBatchNum,\r\n        paseQuantity,\r\n        material,\r\n        purchaseOrderDetail,\r\n        createOrderID\r\n      }\r\n    });\r\n  };\r\n  const handleGoBack = () => {\r\n    f7router.navigate('/retrieval-batch-list', {\r\n      transition: 'ne-backward',\r\n      props: {\r\n        orderLineId,\r\n        batchItem,\r\n        state,\r\n        treeData,\r\n        waresId,\r\n        locationId,\r\n        waresName,\r\n        locationName,\r\n        paseBatchNum,\r\n        paseQuantity,\r\n        material,\r\n        purchaseOrderDetail,\r\n        createOrderID\r\n      }\r\n    });\r\n  };\r\n  const handleWares = item => {\r\n    setWaresId(item.id);\r\n    setLocationList(item.children);\r\n    setWaresName(item.name);\r\n    setLocationId(item.id);\r\n    setLocationName(item.name);\r\n  };\r\n  const handleLocation = item => {\r\n    setLocationId(item.id);\r\n    setLocationName(item.name);\r\n  };\r\n  return (\r\n    <Page>\r\n      <Navbar>\r\n        <NavLeft>\r\n          <a onClick={handleGoBack} className={styles['nav-left']}>\r\n            <img alt=\"\" style={{ height: 24 }} src={backIcon} />\r\n          </a>\r\n        </NavLeft>\r\n        <NavTitle>选择仓位</NavTitle>\r\n      </Navbar>\r\n      <div className={styles['content-box']}>\r\n        <div className={styles['wares-box']}>\r\n          {!isEmpty(treeData) &&\r\n            treeData.map((item, index) => {\r\n              return (\r\n                <div\r\n                  key={item.id}\r\n                  className={\r\n                    waresId == item.id ? styles['wares-item-active'] : styles['wares-item']\r\n                  }\r\n                  onClick={() => {\r\n                    handleWares(item);\r\n                  }}\r\n                >\r\n                  {item.name}\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n\r\n        <div className=\"ne-bottom-container\">\r\n          <Button fill onClick={handleComplete} className=\"ne-bottom-btn\">\r\n            确认选中\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default LocationSelect;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}